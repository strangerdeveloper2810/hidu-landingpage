---
import Button from '../ui/Button.astro';
import { SHOP_INFO } from '../../utils/constants';
---

<section class="relative min-h-screen flex items-center overflow-hidden">
  <!-- Background with gradient -->
  <div class="absolute inset-0 gradient-sunset opacity-10"></div>

  <!-- Animated shapes -->
  <div class="absolute inset-0 overflow-hidden">
    <div
      class="absolute top-20 -left-20 w-72 h-72 bg-primary-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-float"
    >
    </div>
    <div
      class="absolute top-40 -right-20 w-96 h-96 bg-secondary-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-float"
      style="animation-delay: 1s;"
    >
    </div>
    <div
      class="absolute -bottom-20 left-1/2 w-80 h-80 bg-accent-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-float"
      style="animation-delay: 2s;"
    >
    </div>
  </div>

  <div class="container-custom relative z-10">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
      <!-- Content -->
      <div class="text-center lg:text-left" data-aos="fade-right">
        <h1 class="text-5xl md:text-6xl lg:text-7xl font-bold mb-6 leading-tight">
          <span class="text-gradient">{SHOP_INFO.name}</span>
          <br />
          <span class="text-gray-800">{SHOP_INFO.tagline}</span>
        </h1>

        <p class="text-xl text-gray-600 mb-8 max-w-xl mx-auto lg:mx-0">
          {SHOP_INFO.description}
        </p>

        <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
          <Button href="/menu" variant="primary" size="lg">
            Xem thực đơn
          </Button>
          <Button href="/contact" variant="outline" size="lg">
            Liên hệ ngay
          </Button>
        </div>

        <!-- Stats -->
        <div
          class="grid grid-cols-3 gap-6 mt-12 max-w-lg mx-auto lg:mx-0"
          data-aos="fade-up"
          data-aos-delay="200"
        >
          <div class="text-center lg:text-left">
            <div class="text-3xl font-bold text-gradient">100+</div>
            <div class="text-sm text-gray-600">Món đồ uống</div>
          </div>
          <div class="text-center lg:text-left">
            <div class="text-3xl font-bold text-gradient">5K+</div>
            <div class="text-sm text-gray-600">Khách hàng</div>
          </div>
          <div class="text-center lg:text-left">
            <div class="text-3xl font-bold text-gradient">4.9★</div>
            <div class="text-sm text-gray-600">Đánh giá</div>
          </div>
        </div>
      </div>

      <!-- Image/Visual -->
      <div class="relative" data-aos="fade-left" data-aos-delay="300">
        <div class="relative z-10">
          <!-- Placeholder for hero image -->
          <div
            class="w-full h-96 md:h-[500px] rounded-3xl gradient-pastel shadow-2xl flex items-center justify-center"
          >
            <div class="text-center p-8">
              <svg
                class="w-32 h-32 mx-auto mb-4 text-white opacity-80"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                ></path>
              </svg>
              <p class="text-white text-lg font-medium">
                Thêm hình ảnh đồ uống tại<br />
                <code class="text-sm bg-white bg-opacity-20 px-2 py-1 rounded"
                  >/public/images/hero/</code
                >
              </p>
            </div>
          </div>

          <!-- Floating badges -->
          <div
            class="absolute -top-6 -left-6 bg-white rounded-2xl shadow-xl p-4 animate-float"
          >
            <div class="flex items-center space-x-2">
              <div class="w-3 h-3 rounded-full bg-green-500"></div>
              <span class="text-sm font-semibold">Đang mở cửa</span>
            </div>
          </div>

          <div
            class="absolute -bottom-6 -right-6 bg-white rounded-2xl shadow-xl p-4 animate-float"
            style="animation-delay: 1s;"
          >
            <div class="text-center">
              <div class="text-2xl font-bold text-gradient">-20%</div>
              <div class="text-xs text-gray-600">Happy Hour</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll indicator -->
  <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce" id="scroll-indicator">
    <svg
      class="w-6 h-6 text-gray-400"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
    </svg>
  </div>
</section>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  // Parallax effect on scroll
  const shapes = document.querySelectorAll('.animate-float');

  shapes.forEach((shape, index) => {
    gsap.to(shape, {
      y: () => -100 * (index + 1),
      scrollTrigger: {
        trigger: shape,
        start: 'top bottom',
        end: 'bottom top',
        scrub: 1,
      },
    });
  });

  // Mouse move parallax effect
  const heroSection = document.querySelector('section');

  heroSection?.addEventListener('mousemove', (e) => {
    const mouseX = e.clientX / window.innerWidth;
    const mouseY = e.clientY / window.innerHeight;

    shapes.forEach((shape, index) => {
      const speed = (index + 1) * 20;

      gsap.to(shape, {
        x: (mouseX - 0.5) * speed,
        y: (mouseY - 0.5) * speed,
        duration: 0.5,
        ease: 'power2.out',
      });
    });
  });

  // Fade out scroll indicator on scroll
  const scrollIndicator = document.getElementById('scroll-indicator');

  window.addEventListener('scroll', () => {
    const scrolled = window.pageYOffset;

    if (scrollIndicator) {
      const opacity = Math.max(0, 1 - scrolled / 300);
      scrollIndicator.style.opacity = opacity.toString();
    }
  });

  // Text reveal animation
  gsap.from('h1', {
    y: 50,
    opacity: 0,
    duration: 1,
    ease: 'power3.out',
    delay: 0.2,
  });

  gsap.from('p', {
    y: 30,
    opacity: 0,
    duration: 0.8,
    ease: 'power3.out',
    delay: 0.5,
  });

  // Button animations
  const buttons = document.querySelectorAll('.btn');
  gsap.from(buttons, {
    y: 20,
    opacity: 0,
    duration: 0.6,
    stagger: 0.2,
    ease: 'power3.out',
    delay: 0.8,
  });

  // Floating badges entrance animation
  const badges = document.querySelectorAll('[class*="absolute -"]');
  gsap.from(badges, {
    scale: 0,
    opacity: 0,
    duration: 0.8,
    stagger: 0.2,
    ease: 'back.out(1.7)',
    delay: 1.2,
  });
</script>
