---
import Navigation from './Navigation.astro';
import Button from '../ui/Button.astro';
import { SHOP_INFO } from '../../utils/constants';
---

<header
  id="header"
  class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-white bg-opacity-95 backdrop-blur-sm py-2 lg:py-3"
>
  <div class="container-custom">
    <div class="flex items-center justify-between">
      <!-- Logo -->
      <a href="/" class="flex items-center space-x-2 group flex-shrink-0">
        <div class="w-12 h-12 rounded-full overflow-hidden shadow-lg group-hover:scale-110 transition-transform duration-300 ring-2 ring-primary-200 bg-primary-100 flex items-center justify-center">
          <img
            src="https://images.unsplash.com/photo-1517487881594-2787fef5ebf7?w=150&h=150&fit=crop"
            alt="Hidu Drinks Logo"
            class="w-full h-full object-cover"
            loading="eager"
            onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22%3E%3Ccircle cx=%2250%22 cy=%2250%22 r=%2245%22 fill=%22%239d7c6b%22/%3E%3Ctext x=%2250%22 y=%2265%22 font-size=%2240%22 font-weight=%22bold%22 fill=%22white%22 text-anchor=%22middle%22%3EH%3C/text%3E%3C/svg%3E'"
          />
        </div>
        <div>
          <h1 class="text-xl font-bold text-gradient">{SHOP_INFO.name}</h1>
          <p class="text-xs text-gray-600">{SHOP_INFO.tagline}</p>
        </div>
      </a>

      <!-- Navigation -->
      <div class="flex-1 flex justify-center px-8 lg:px-16">
        <Navigation />
      </div>

      <!-- CTA Button -->
      <div class="hidden lg:block flex-shrink-0">
        <Button href="/contact" variant="primary">
          Đặt hàng ngay
        </Button>
      </div>
    </div>
  </div>
</header>

<script>
  // Header scroll effect
  const header = document.getElementById('header');
  let lastScroll = 0;

  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;

    if (currentScroll > 100) {
      header?.classList.add('bg-white', 'shadow-md', 'bg-opacity-100');
      header?.classList.remove('bg-opacity-95');
    } else {
      header?.classList.remove('bg-opacity-100');
      header?.classList.add('bg-opacity-95');
      if (currentScroll === 0) {
        header?.classList.remove('shadow-md');
      }
    }

    // Hide header on scroll down, show on scroll up
    if (currentScroll > lastScroll && currentScroll > 500) {
      header?.style.setProperty('transform', 'translateY(-100%)');
    } else {
      header?.style.setProperty('transform', 'translateY(0)');
    }

    lastScroll = currentScroll;
  });
</script>
